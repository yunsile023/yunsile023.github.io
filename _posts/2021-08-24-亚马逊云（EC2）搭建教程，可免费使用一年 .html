---
layout: post
title: '亚马逊云（EC2）搭建教程，可免费使用一年 '
subtitle: '自己折腾'
date: 2021-08-24
categories: 群晖
cover: 'http://on2171g4d.bkt.clouddn.com/jekyll-theme-h2o-postcover.jpg'
tags: 群晖
---
<attachment contenteditable="false" data-atts="%5B%5D" data-aid=".atts-c0ccff49-1d13-4e51-9468-a642ec23722c"></attachment><p><span style="color: rgb(99, 85, 55);">aws 注册前提条件 </span></p><p><span style="color: rgb(99, 85, 55);">1.要有一个亚马逊账号</span></p><p><span style="color: rgb(99, 85, 55);"> 2.需要有一张双币信用卡，比如 Visa、MasterCard、用于注册验证。（网上有网友说可以使用财付通的美国运通卡，不过我没试过）。没有实体双币信用卡的话，也可以试下 MasterCard 虚拟信用卡，比如拍住赏，拍住赏注册可以参考这篇文章：</span><a href="https://coderschool.cn/3254.html" target="_blank" style="color: rgb(99, 85, 55);">拍住赏注册教程&nbsp;。</a><span style="color: rgb(99, 85, 55);"> </span></p><p><span style="color: rgb(99, 85, 55);">3.拍住赏注册比较麻烦，虚拟信用卡可以选择 Visa后者&nbsp;MasterCard 虚拟信用卡，具体可以查看：</span><a href="https://coderschool.cn/3318.html" target="_blank" style="color: rgb(99, 85, 55);">EasyPay 易购卡虚拟信用卡 </a></p><p><span style="color: rgb(99, 85, 55);">亚马逊云注册步骤 </span></p><p><span style="color: rgb(99, 85, 55);">官网地址：https://amazonaws-china.com/cn </span></p><p><span style="color: rgb(99, 85, 55);">如果你没有亚马逊账号，那么先注册一个账号，访问官网后，点击右上角的注册选项开始注册： </span></p><p><img src="https://raw.githubusercontent.com/yunsile023/gitnote-images/master/gitnote/2021/08/24/aws1-1629786138716.png"></p><p><span style="color: rgb(99, 85, 55);">然后输入邮箱、密码等信息，如： </span></p><p><img src="https://raw.githubusercontent.com/yunsile023/gitnote-images/master/gitnote/2021/08/24/aws2-1629786169303.png"></p><p><span style="color: rgb(99, 85, 55);">接着继续填写联系人信息，如下： </span></p><p><img src="https://raw.githubusercontent.com/yunsile023/gitnote-images/master/gitnote/2021/08/24/aws3-1629786200101.png"></p><p><img src="https://raw.githubusercontent.com/yunsile023/gitnote-images/master/gitnote/2021/08/24/aws4-1629786214861.png"></p><p><span style="color: rgb(99, 85, 55);">然后点击创建账户并继续，如果上面填写的信息没问题，则进入到信用卡验证这一步。如下： </span></p><p><img src="https://raw.githubusercontent.com/yunsile023/gitnote-images/master/gitnote/2021/08/24/aws5-1629786240421.png"></p><p><span style="color: rgb(99, 85, 55);">信息提交成功后，信用卡会扣款 1 美元。接着进入下一步，电话验证： </span></p><p><img src="https://raw.githubusercontent.com/yunsile023/gitnote-images/master/gitnote/2021/08/24/aws6-1629786270157.png"></p><p><span style="color: rgb(99, 85, 55);">点击立即呼叫我，然后屏幕上就会显示 4 位 pin 码，紧接着你会收到来自亚马逊的验证电话： </span></p><p><img src="https://raw.githubusercontent.com/yunsile023/gitnote-images/master/gitnote/2021/08/24/aws7-1629786293914.png"></p><p><span style="color: rgb(99, 85, 55);">接听电话后，你在电话正确输入屏幕上显示的 4 位 pin 码，即可验证成功： </span></p><p><img src="https://raw.githubusercontent.com/yunsile023/gitnote-images/master/gitnote/2021/08/24/aws8-1629786348844.png"></p><p><span style="color: rgb(99, 85, 55);">然后接着点击继续进入下一步，选择支持计划： </span></p><p><img src="https://raw.githubusercontent.com/yunsile023/gitnote-images/master/gitnote/2021/08/24/aws9-1629786371795.png"></p><p><span style="color: rgb(99, 85, 55);">我们选择基本方案免费选项，进入下一步，这一步会我们的账户处于激活中，如果成功激活后会收到一封激活邮件，这个过程大概几分钟的时间： </span></p><p><img src="https://raw.githubusercontent.com/yunsile023/gitnote-images/master/gitnote/2021/08/24/aws10-1629786399068.png"></p><p><span style="color: rgb(99, 85, 55);">亚马逊云 EC2&nbsp;搭建 </span></p><p><span style="color: rgb(99, 85, 55);">点击右上角的我的账户，然后选择 AWS 控制台，输入账号、密码进行登录： </span></p><p><img src="https://raw.githubusercontent.com/yunsile023/gitnote-images/master/gitnote/2021/08/24/aws11-1629786426882.png"></p><p><span style="color: rgb(99, 85, 55);">登录后，右上角的地区选择一个合适的地区，如： </span></p><p><img src="https://raw.githubusercontent.com/yunsile023/gitnote-images/master/gitnote/2021/08/24/aws12-1629786452498.png"></p><p><span style="color: rgb(99, 85, 55);">接着，在左上角的服务，选择 EC2，如：</span></p><p><br></p><p><span style="color: rgb(99, 85, 55);"><img src="https://raw.githubusercontent.com/yunsile023/gitnote-images/master/gitnote/2021/08/24/aws13-1629786481241.png"> </span></p><p><span style="color: rgb(99, 85, 55);">然后在新开的页面中，会有一个创建实例的选项： </span></p><p><img src="https://raw.githubusercontent.com/yunsile023/gitnote-images/master/gitnote/2021/08/24/aws14-1629786516889.png"></p><p><span style="color: rgb(99, 85, 55);">点击启动实例，进入到选择一个 Amazon 系统映像选项，往下拉，找到 Ubuntu Server 14.04 LTS (HVM) 选项（注意，要记得选择符合条件的免费套餐）： </span></p><p><img src="https://raw.githubusercontent.com/yunsile023/gitnote-images/master/gitnote/2021/08/24/aws15-1629786540199.png"></p><p><span style="color: rgb(99, 85, 55);">然后点击选择选项，进入到实例类型选项，仍旧选择符合条件的免费套餐，然后点击审核和启动： </span></p><p><img src="https://raw.githubusercontent.com/yunsile023/gitnote-images/master/gitnote/2021/08/24/aws16-1629786570696.png"></p><p><span style="color: rgb(99, 85, 55);">接着是核查实例启动，这里不用操作什么，直接点击启动： </span></p><p><img src="https://raw.githubusercontent.com/yunsile023/gitnote-images/master/gitnote/2021/08/24/aws17-1629786622103.png"></p><p><span style="color: rgb(99, 85, 55);">然后出现一个选择现有密钥对或创建新密钥对的弹窗，这里我们选择创建新密钥对，然后密钥对名称你可以随便取一个名字，不过该名字在登录时有用，这里我取 gufen，如下： </span></p><p><img src="https://raw.githubusercontent.com/yunsile023/gitnote-images/master/gitnote/2021/08/24/aws18-1629786650367.png"></p><p><span style="color: rgb(99, 85, 55);">然后点击下载密钥对，下载一个后缀为 pem 的文件,因为我这里名称为gufen，所以下载的文件名称为 gufen.pem 。(注意该文件记得保存，后面会用到，用于服务器登录)。然后启动实例即可： </span></p><p><img src="https://raw.githubusercontent.com/yunsile023/gitnote-images/master/gitnote/2021/08/24/aws19-1629786677872.png"></p><p><span style="color: rgb(99, 85, 55);">启动后，会提示启动状态： </span></p><p><img src="https://raw.githubusercontent.com/yunsile023/gitnote-images/master/gitnote/2021/08/24/aws20-1629786703191.png"></p><p><span style="color: rgb(99, 85, 55);">如果你害怕不小心超出免费账单，那么可以选择创建账单警报。这里我忽略。 过一会而重新返回 EC2 首页，就会看到实例已经启动并在运行了： </span></p><p><img src="https://raw.githubusercontent.com/yunsile023/gitnote-images/master/gitnote/2021/08/24/aws23-1629786726990.png"></p><p><span style="color: rgb(99, 85, 55);">点击正在运行的实例，可以查看外网 ip 、共有 dns 等信息： </span></p><p><img src="https://raw.githubusercontent.com/yunsile023/gitnote-images/master/gitnote/2021/08/24/aws24-1629786751567.png"></p><p><span style="color: rgb(99, 85, 55);">使用 xshell 连接 EC2 服务器 </span></p><p><span style="color: rgb(99, 85, 55);">这里连接工具我选择 xshell，你也可以选择其它连接工具。打开 xshell，然后在工具选项选择用户密钥管理者： </span></p><p><img src="https://raw.githubusercontent.com/yunsile023/gitnote-images/master/gitnote/2021/08/24/aws21-1629786777076.png"></p><p><span style="color: rgb(99, 85, 55);">选择后，在弹出的对话框里面导入之前保存的 pem 文件，如下; </span></p><p><img src="https://raw.githubusercontent.com/yunsile023/gitnote-images/master/gitnote/2021/08/24/aws22-1629786802340.png"></p><p><span style="color: rgb(99, 85, 55);">导入后，新建连接，如： </span></p><p><img src="https://raw.githubusercontent.com/yunsile023/gitnote-images/master/gitnote/2021/08/24/aws25-1629786845893.png"></p><p><span style="color: rgb(99, 85, 55);">然后在新建连接里面输入名称（随便填）、协议 ssh、主机（EC2 实例的连接ip)、端口号 22 ： </span></p><p><img src="https://raw.githubusercontent.com/yunsile023/gitnote-images/master/gitnote/2021/08/24/aws26-1629786867996.png"></p><p><span style="color: rgb(99, 85, 55);">信息填完后，不要点击确定，点击连接下方的用户身份验证： </span></p><p><img src="https://raw.githubusercontent.com/yunsile023/gitnote-images/master/gitnote/2021/08/24/aws27-1629786887524.png"></p><p><span style="color: rgb(99, 85, 55);">注意：方法选择 Public key，用户名填 ubuntu （根据你选择的 EC2 实例类型），用户密钥选择之前导入的 pem 文件。官方文档是说：</span></p><p><span style="color: rgb(99, 85, 55);"> 每个 Linux 实例类型均使用默认 Linux 系统用户账户启动。&nbsp;</span></p><p><span style="color: rgb(99, 85, 55);">对于 Amazon Linux，用户名称是 ec2-user。</span></p><p><span style="color: rgb(99, 85, 55);"> 对于 RHEL5，用户名称是 root 或 ec2-user。 </span></p><p><span style="color: rgb(99, 85, 55);">对于 Ubuntu，用户名称是 ubuntu。 </span></p><p><span style="color: rgb(99, 85, 55);">对于 Fedora，用户名称是 fedora或 ec2-user。 </span></p><p><span style="color: rgb(99, 85, 55);">对于 SUSE Linux，用户名称是 root 或 ec2-user。 </span></p><p><span style="color: rgb(99, 85, 55);">你可以根据你自己选择的系统类型选择填写对应的用户名。 </span></p><p><span style="color: rgb(99, 85, 55);">只要信息没填写错误，点击确定后就可以连接成功： </span></p><p><img src="https://raw.githubusercontent.com/yunsile023/gitnote-images/master/gitnote/2021/08/24/aws28-1629786949601.png"></p><p><span style="color: rgb(99, 85, 55);">然后就可以开始搭建各种服务了，诸如网站等各种服务。:) 。如果在搭建过程中需要使用 root 用户，使用 sudo -i 命令切换到 root 用户即可。上面关于亚马逊云aws搭建基本就完成了，不过还要记得配置防火墙。 </span></p><p><span style="color: rgb(99, 85, 55);">修改 EC2 防火墙配置 </span></p><p><span style="color: rgb(99, 85, 55);">在搭建完相应的服务后，发现始终连接不上。亚马逊云 EC2 防火墙入站配置默认只开启了 22 端口的流量，你可以修改该配置，把协议和端口范围都改成全部，或者新建一条防火墙规则，开启某个特定端口。 </span></p><p><span style="color: rgb(99, 85, 55);">在实例列表中，往右边拖动，有一个安全组标签，选择该标签进入防火墙配置： </span></p><p><img src="https://raw.githubusercontent.com/yunsile023/gitnote-images/master/gitnote/2021/08/24/aws29-1629786995771.png"></p><p><span style="color: rgb(99, 85, 55);">然后编辑入站规则： </span></p><p><img src="https://raw.githubusercontent.com/yunsile023/gitnote-images/master/gitnote/2021/08/24/aws30-1629787018995.png"></p><p><span style="color: rgb(99, 85, 55);">改成所有流量通行，或者你可以添加其它端口规则： </span></p><p><img src="https://raw.githubusercontent.com/yunsile023/gitnote-images/master/gitnote/2021/08/24/aws31-1629787036049.png"></p><p><span style="color: rgb(99, 85, 55);">修改完后，基本上就立即生效了，这时候就可以愉快的使用各种服务了。 </span></p><p><br></p><p>一定到邮箱里设置一年后发邮件把它停止了。</p><p><br></p><p><br></p><p><br></p><p><br></p>